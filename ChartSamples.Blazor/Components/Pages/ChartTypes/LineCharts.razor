@page "/chart-types/line-charts"

<PageTitle>Line Charts - Chart Samples</PageTitle>

<SampleBase Title="Line, Step Line and Curve Chart Types"
            Description="This sample demonstrates the Line, Spline and, StepLine chart types."
            CSharpCode="@_csharpCode">
    
    <div class="sample-layout">
        <div class="chart-panel">
            <ChartViewer Width="412" Height="296" Configure="@ConfigureChart" />
        </div>
        
        <div class="control-panel">
            <div class="control-group">
                <label>Chart Type:</label>
                <select @bind="SelectedChartType" @bind:after="RefreshChart">
                    <option value="Line">Line</option>
                    <option value="Spline">Spline</option>
                    <option value="StepLine">StepLine</option>
                </select>
            </div>
            <div class="control-group">
                <label>Point Labels:</label>
                <select @bind="PointLabels" @bind:after="RefreshChart">
                    <option value="None">None</option>
                    <option value="Auto">Auto</option>
                    <option value="TopLeft">TopLeft</option>
                    <option value="Top">Top</option>
                    <option value="TopRight">TopRight</option>
                    <option value="Right">Right</option>
                    <option value="BottomRight">BottomRight</option>
                    <option value="Bottom">Bottom</option>
                    <option value="BottomLeft">BottomLeft</option>
                    <option value="Left">Left</option>
                    <option value="Center">Center</option>
                </select>
            </div>
            <div class="control-group">
                <label>Show X Axis Margin:</label>
                <input type="checkbox" @bind="ShowXAxisMargin" @bind:after="RefreshChart" />
            </div>
            <div class="control-group">
                <label>Display chart as 3D:</label>
                <input type="checkbox" @bind="Show3D" @bind:after="RefreshChart" disabled title="3D not yet supported" />
            </div>
        </div>
    </div>
    
    <div class="sample-note">
        The label style can be set using the LabelStyle custom attribute, and the ShowMarkers 
        custom attribute is used to display data point markers when the chart area is set to 3D.
    </div>

</SampleBase>

<style>
    .sample-layout {
        display: flex;
        gap: 20px;
        padding: 20px;
    }
    .chart-panel {
        flex: 0 0 auto;
    }
    .control-panel {
        flex: 0 0 280px;
        padding: 10px;
    }
    .sample-note {
        padding: 15px 20px;
        background: #f9f9f9;
        border-top: 1px solid #e0e0e0;
        font-size: 13px;
        color: #555;
        line-height: 1.5;
    }
</style>

@code {
    private string SelectedChartType { get; set; } = "Line";
    private string PointLabels { get; set; } = "None";
    private bool ShowXAxisMargin { get; set; } = false;
    private bool Show3D { get; set; } = false;
    
    // Randomize seed - increment to get different deterministic data sets
    private int RandomizeSeed { get; set; } = 0;

    private void ConfigureChart(SvgChart chart)
    {
        // Match WinForms styling
        chart.Title = "";
        chart.ShowLegend = false;
        
        // Set chart background gradient to match WinForms
        // WinForms: BackColor = Color.FromArgb(243, 223, 193), BackGradientStyle = TopBottom
        chart.BackColor = ChartColor.FromArgb(243, 223, 193);
        chart.BackSecondaryColor = ChartColor.White;
        chart.BackGradientStyle = ChartGradientStyle.TopBottom;
        
        // Configure chart area to match WinForms styling
        // WinForms: BackColor = OldLace, BackSecondaryColor = White, BackGradientStyle = TopBottom
        var chartArea = chart.ChartAreas[0];
        chartArea.BackColor = ChartColor.FromArgb(253, 245, 230);  // OldLace
        chartArea.BackSecondaryColor = ChartColor.White;
        chartArea.BackGradientStyle = ChartGradientStyle.TopBottom;
        chartArea.AxisColor = ChartColor.FromArgb(64, 64, 64, 64); // Semi-transparent
        chartArea.GridColor = ChartColor.FromArgb(64, 64, 64, 64); // Semi-transparent

        // Set X axis margin based on checkbox
        chartArea.AxisX.IsMarginVisible = ShowXAxisMargin;

        // Parse selected chart type to SvgChartType enum
        var chartType = SelectedChartType switch
        {
            "Spline" => SvgChartType.Spline,
            "StepLine" => SvgChartType.StepLine,
            _ => SvgChartType.Line
        };

        // Use seeded random for deterministic but realistic data
        var random = new Random(RandomizeSeed);

        // Series 1 - Blue line with Circle markers (matches WinForms)
        var series1 = new SvgChartSeries("Series1")
        {
            ChartType = chartType,
            Color = ChartColor.FromArgb(220, 65, 140, 240),  // Matches WinForms series1.Color
            LineWidth = 3,                                    // Matches BorderWidth = 3
            ShowMarkers = true,
            MarkerSize = 8,                                   // Matches MarkerSize = 8
            MarkerStyle = SvgMarkerStyle.Circle,              // Matches MarkerStyle.Circle
            IsValueShownAsLabel = PointLabels != "None",
            LabelStyle = PointLabels
        };

        // Series 2 - Orange/Red line with Diamond markers (matches WinForms)
        var series2 = new SvgChartSeries("Series2")
        {
            ChartType = chartType,
            Color = ChartColor.FromArgb(220, 224, 64, 10),   // Matches WinForms series2.Color
            LineWidth = 3,                                    // Matches BorderWidth = 3
            ShowMarkers = true,
            MarkerSize = 9,                                   // Matches MarkerSize = 9
            MarkerStyle = SvgMarkerStyle.Diamond,             // Matches MarkerStyle.Diamond
            IsValueShownAsLabel = PointLabels != "None",
            LabelStyle = PointLabels
        };

        // Add data points using same ranges as WinForms:
        // Series1: random.Next(45, 95)
        // Series2: random.Next(5, 65)
        for (int i = 0; i < 10; i++)
        {
            series1.Points.Add(new SvgDataPoint(i + 1, random.Next(45, 95)));
            series2.Points.Add(new SvgDataPoint(i + 1, random.Next(5, 65)));
        }

        chart.Series.Add(series1);
        chart.Series.Add(series2);
    }

    private void RefreshChart()
    {
        StateHasChanged();
    }

    private const string _csharpCode = @"// Set series chart type (Line, Spline, or StepLine)
chart1.Series[""Series1""].ChartType = SeriesChartType.Line;
chart1.Series[""Series2""].ChartType = SeriesChartType.Line;

// Populate series data
Random random = new Random();
for (int pointIndex = 0; pointIndex < 10; pointIndex++)
{
    chart1.Series[""Series1""].Points.AddY(random.Next(45, 95));
    chart1.Series[""Series2""].Points.AddY(random.Next(5, 65));
}

// Configure marker styles
chart1.Series[""Series1""].MarkerStyle = MarkerStyle.Circle;
chart1.Series[""Series1""].MarkerSize = 8;
chart1.Series[""Series2""].MarkerStyle = MarkerStyle.Diamond;
chart1.Series[""Series2""].MarkerSize = 9;

// Configure line width
chart1.Series[""Series1""].BorderWidth = 3;
chart1.Series[""Series2""].BorderWidth = 3;

// Configure colors
chart1.Series[""Series1""].Color = Color.FromArgb(220, 65, 140, 240);
chart1.Series[""Series2""].Color = Color.FromArgb(220, 224, 64, 10);

// Set point labels (optional)
if (comboBoxPointLabels.Text != ""None"")
{
    chart1.Series[""Series1""].IsValueShownAsLabel = true;
    chart1.Series[""Series2""].IsValueShownAsLabel = true;
    if (comboBoxPointLabels.Text != ""Auto"")
    {
        chart1.Series[""Series1""][""LabelStyle""] = comboBoxPointLabels.Text;
        chart1.Series[""Series2""][""LabelStyle""] = comboBoxPointLabels.Text;
    }
}

// Set X axis margin
chart1.ChartAreas[""Default""].AxisX.IsMarginVisible = checkBoxShowMargin.Checked;

// Enable 3D mode (optional)
chart1.ChartAreas[0].Area3DStyle.Enable3D = checkBoxShow3D.Checked;
chart1.ChartAreas[0].Area3DStyle.Inclination = 40;
chart1.ChartAreas[0].Area3DStyle.Rotation = 25;";
}
